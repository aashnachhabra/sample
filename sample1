import { Component, EventEmitter, Input, Output } from '@angular/core';
import { faSquareFull } from '@fortawesome/free-regular-svg-icons';
import { faCheck, faX } from '@fortawesome/free-solid-svg-icons';
import { faPenToSquare, faTrashCan } from '@fortawesome/free-regular-svg-icons';

@Component({
  selector: '[app-table-row]',
  templateUrl: './table-row.component.html',
  styleUrls: ['./table.component.scss'],
})
export class TableRowComponent {
  faPenToSquare = faPenToSquare;
  faCheck = faCheck;
  faTrashCan = faTrashCan;
  faX = faX;

  @Input() record!: any;
  @Input() columnMaps!: any;
  @Input() index!: number;
  @Input() editable: boolean = false;
  @Output() saveValue: EventEmitter<any> = new EventEmitter<any>();
  @Output() deleteValue: EventEmitter<any> = new EventEmitter<any>();

  editingRow: boolean = false;
  faSquareFull = faSquareFull;
  editableClass = 'form-control-plaintext';
  oldRecord: any;

  saveRecord() {
    this.saveValue.emit(this.record);
    this.editingRow = false;
  }

  deleteRecord() {
    this.deleteValue.emit(this.record);
    this.editingRow = false;
  }

  toggleEditable() {
    this.editingRow = true;
    this.oldRecord = { ...this.record };
  }

  cancelEditing(){
    this.editingRow = false;
    this.record = this.oldRecord;
  }
} 
