<nav class="navbar navbar-expand-lg navbar-light">
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip();

        });

        function logoutfunction() {
            window.location.href = "${pageContext.servletContext.contextPath }/logout";
        }
        function enableAndDisableCards() {
            var roleId = "${pageContext.session.getAttribute('roleId')}";
            var abbId = "${pageContext.session.getAttribute('abbId')}";
            var reportingId = "${pageContext.session.getAttribute('reportingId')}";
            var ifpRoleId = "${pageContext.session.getAttribute('ifpRoleId')}";
            var nonIfpRoleId = "${pageContext.session.getAttribute('nonIfpRoleId')}";
            var sbcRoleId = "${pageContext.session.getAttribute('sbcRoleId')}";
            var iceRoleId = "${pageContext.session.getAttribute('iceRoleId')}";
            var isIceEnable = "${pageContext.session.getAttribute('iceEnable')}";
            var coreId = "${pageContext.session.getAttribute('coreId')}";
            var dbsId = "${pageContext.session.getAttribute('dbsId')}";
            var ticSchedulerId = "${pageContext.session.getAttribute('ticSchedulerGroup')}";
            var dentalVisionRoleId = "${pageContext.session.getAttribute('dentalVisionRoleId')}";
            var byofId="${pageContext.session.getAttribute('byofId')}";
            var isByofEnable = "${pageContext.session.getAttribute('byofEnable')}";
            var env = "${pageContext.session.getAttribute('env')}";
            var documentButton = document.getElementById('documents');
            var transformButton = document.getElementById('transform');
            var ideateButton = document.getElementById('ideate');
            documentButton.dataset.bsTarget = "#docManagementModal";
            transformButton.dataset.bsTarget ="#teModal";
            $('#EI').css('display', 'none');
            $('#AI').css('display', 'none');
            $('#EITransform').css('display', 'none');
            $('#AITransform').css('display', 'none');
            $('#individual-family-plans-card').css('display', 'none');
            $('#stepwise-plans-card').css('display', 'none');
            if ($('#lineOfBusiness option:selected').text() == "E&I - United Strategic Platform") {
                ideateButton.dataset.bsTarget ="#portfolioModalGftr";
                $('#EI').css('display', 'block');
                $('#AI').css('display', 'none');
                $('#EITransform').css('display', 'block');
                $('#AITransform').css('display', 'none');
                $('#stepwise-plans-card').css('display', 'block');
                if (ticSchedulerId == 2) {
                    document.getElementById('consume').disabled = false;
                }
                if (roleId != 8 && roleId != 9 && roleId != 10) {
                    document.getElementById('transform').disabled = false;
                }
                if (roleId == 4 || reportingId == 1) {
                    document.getElementById('vizualize').disabled = false;
                }
                if (nonIfpRoleId == 35 || nonIfpRoleId == 36 || nonIfpRoleId == 37 || nonIfpRoleId == 4) {
                    document.getElementById('ideate').disabled = false;
                } else {
                    document.getElementById('ideate').disabled = true;
                }
                if (sbcRoleId == 11 || sbcRoleId == 12 || sbcRoleId == 13) {

                    document.getElementById('documents').disabled = false;
                }
                if (ifpRoleId == 8 || ifpRoleId == 9 || ifpRoleId == 10 || roleId == 4) {
                    document.getElementById('track').disabled = false;
                }

                if (isIceEnable) {
                    if (iceRoleId == 12 || iceRoleId == 13 || iceRoleId == 14) {
                        document.getElementById('certify').disabled = false;
                    }
                }

                if(coreId == 1) {
                    document.getElementById('validate').disabled = false;
                }
                if(dbsId == 1) {
                    document.getElementById('shop').disabled = false;
                }

                 document.getElementById("card-UMR").style.display="none";
                 document.getElementById("allCards").style.display="block";
                 document.getElementById("bsmIdeatePortfolioMgmtBtn").style.display="none";
                 document.getElementById("ideate").style.display="block";
            }

            if ($('#lineOfBusiness option:selected').text() == "E&I - ACIS") {
                document.getElementById('consume').disabled = true;
                document.getElementById('transform').disabled = true;
                document.getElementById('vizualize').disabled = true;
                ideateButton.dataset.bsTarget ="#portfolioModalACIS";
                document.getElementById('ideate').disabled = false;
                document.getElementById('validate').disabled = true;
                document.getElementById('track').disabled = true;
                document.getElementById('certify').disabled = true;
                if(coreId == 1) {
                    document.getElementById('validate').disabled = false;
                }
                if(dbsId == 1) {
                    document.getElementById('shop').disabled = false;
                }
                 document.getElementById("card-UMR").style.display="none";
                 document.getElementById("allCards").style.display="block";
                 document.getElementById("bsmIdeatePortfolioMgmtBtn").style.display="none";
                 document.getElementById("ideate").style.display="block";
                 document.getElementById("card-Regulatory").style.display="none";
            }

            if ($('#lineOfBusiness option:selected').text() == "E&I - Global Solutions") {
                document.getElementById('consume').disabled = true;
                document.getElementById('transform').disabled = true;
                if (roleId == 4 || reportingId == 1) {
                    document.getElementById('vizualize').disabled = false;
                }
                document.getElementById('ideate').disabled = true;
                document.getElementById('documents').disabled = true;
                document.getElementById('track').disabled = true;
                document.getElementById('certify').disabled = true;
                document.getElementById('validate').disabled = true;
                if(dbsId == 1) {
                    document.getElementById('shop').disabled = false;
                }

                 document.getElementById("card-UMR").style.display="none";
                 document.getElementById("allCards").style.display="block";
                 document.getElementById("bsmIdeatePortfolioMgmtBtn").style.display="none";
                 document.getElementById("ideate").style.display="block";
                 document.getElementById("card-Regulatory").style.display="none";
            }

            if ($('#lineOfBusiness option:selected').text() == "A&I - Dental/Vision/FPP") {
            	 $('#EITransform').css('display', 'block');
                 $('#AITransform').css('display', 'none');
                documentButton.dataset.bsTarget = "#denVisManagementModal";
                if (dentalVisionRoleId == 3 || dentalVisionRoleId == 5 || dentalVisionRoleId == 7) {
                    documentButton.dataset.bsTarget = "#visManagementModal";
                }
                if (dentalVisionRoleId == 2 || dentalVisionRoleId == 4 || dentalVisionRoleId == 6) {
                    documentButton.dataset.bsTarget = "#denManagementModal";
                }
                document.getElementById('consume').disabled = true;
                document.getElementById('transform').disabled = false;

                if (roleId == 4 || reportingId == 1) {
                    document.getElementById('vizualize').disabled = false;
                }
                document.getElementById('ideate').disabled = true;
                document.getElementById('documents').disabled = false;
                document.getElementById('track').disabled = true;
                document.getElementById('certify').disabled = true;
                document.getElementById('validate').disabled = true;
                if(dbsId == 1) {
                    document.getElementById('shop').disabled = false;
                }

                 document.getElementById("card-UMR").style.display="none";
                 document.getElementById("allCards").style.display="block";
                 document.getElementById("bsmIdeatePortfolioMgmtBtn").style.display="none";
                 document.getElementById("ideate").style.display="block";
                 document.getElementById("card-Regulatory").style.display="none";
            }

            if ($('#lineOfBusiness option:selected').text() == "A&I - Individual & Family Plans") {
            	 $('#EI').css('display', 'none');
                 $('#AI').css('display', 'block');
                 $('#EITransform').css('display', 'none');
                 $('#AITransform').css('display', 'block');
                 $('#individual-family-plans-card').css('display', 'block');
                document.getElementById('consume').disabled = true;
                ideateButton.dataset.bsTarget ="#portfolioModal";

                if ((abbId == 19 || abbId == 20 || abbId == 21 || roleId == 4) && env != 'Production') {
                    document.getElementById('transform').disabled = false;
                    transformButton.dataset.bsTarget = "#abbModal";
                }else{
                    document.getElementById('transform').disabled = true;
                }
                document.getElementById('vizualize').disabled = false;
                if (ifpRoleId == 8 || ifpRoleId == 9 || ifpRoleId == 10 || roleId == 4) {
                    document.getElementById('ideate').disabled = false;
                }
                if (sbcRoleId == 11 || sbcRoleId == 12 || sbcRoleId == 13) {
                    document.getElementById('documents').disabled = false;
                }
                document.getElementById('track').disabled = true;
                document.getElementById('certify').disabled = true;
                if(coreId == 1) {
                    document.getElementById('validate').disabled = false;
                }
                document.getElementById('shop').disabled = true;

                 document.getElementById("card-UMR").style.display="none";
                 document.getElementById("allCards").style.display="block";
                 document.getElementById("bsmIdeatePortfolioMgmtBtn").style.display="none";
                 document.getElementById("ideate").style.display="block";
                 document.getElementById("card-Regulatory").style.display="none";
            }

            if ($('#lineOfBusiness option:selected').text() == "UHG - Transparency In Coverage") {
                if (ticSchedulerId == 2) {
                    document.getElementById('consume').disabled = false;
                }
                document.getElementById('transform').disabled = true;
                document.getElementById('vizualize').disabled = false;
                document.getElementById('ideate').disabled = true;
                document.getElementById('documents').disabled = true;
                document.getElementById('track').disabled = true;
                document.getElementById('certify').disabled = true;
                document.getElementById('validate').disabled = true;
                document.getElementById('shop').disabled = true;

                 document.getElementById("card-UMR").style.display="none";
                 document.getElementById("allCards").style.display="block";
                 document.getElementById("bsmIdeatePortfolioMgmtBtn").style.display="none";
                 document.getElementById("ideate").style.display="block";
                 document.getElementById("card-Regulatory").style.display="none";
            }

             if ($('#lineOfBusiness option:selected').text() == "E&I - UMR") {


               document.getElementById("allCards").style.display="none";
               document.getElementById("card-Regulatory").style.display="none";

               if(isByofEnable=="true")
               {
               document.getElementById("card-UMR").style.display="block";

                    if (byofId == 31 || byofId == 32 || byofId == 33 || byofId == 34)
                    document.getElementById('UMRbtn').disabled = false;
                    else document.getElementById('UMRbtn').disabled = true;
               }
                else {
                 document.getElementById("card-UMR").style.display="none";
                 }
             document.getElementById("bsmIdeatePortfolioMgmtBtn").style.display="none";
             document.getElementById("ideate").style.display="block";

            }

            if ($('#lineOfBusiness option:selected').text() == "C&S - Medicaid") {
                document.getElementById('consume').disabled = true;
                document.getElementById('transform').disabled = true;
                document.getElementById('vizualize').disabled = false;
                document.getElementById('ideate').disabled = false;
                document.getElementById('documents').disabled = true;
                document.getElementById('track').disabled = true;
                document.getElementById('certify').disabled = true;
                document.getElementById('validate').disabled = true;
                document.getElementById('shop').disabled = true;
                document.getElementById("ideate").style.display = "none";
                 document.getElementById("card-UMR").style.display="none";
                 document.getElementById("allCards").style.display="block";
                 document.getElementById("bsmIdeatePortfolioMgmtBtn").style.display="block";
            }

            if ($('#lineOfBusiness option:selected').text() == "E&I - Regulatory Affairs") {
                document.getElementById("allCards").style.display="none";
                document.getElementById("card-UMR").style.display="none";
                document.getElementById("card-Regulatory").style.display="block";
            }
        }

        function changeDefault() {
            var defaultBusiness = "${pageContext.session.getAttribute('defaultBusiness')}";
            var dd = document.getElementById("defaultLineOfBusiness");
            dd.selectedIndex = [...dd.options].findIndex (option => option.text === defaultBusiness);
            $("#defaultBusinessModal").show();
        }

        function setDefault() {
            var defaultBusiness = "${pageContext.session.getAttribute('defaultBusiness')}";
            if(defaultBusiness == null || defaultBusiness == '') {
                $("#defaultBusinessModal").show();
            } else {
                var dd = document.getElementById("lineOfBusiness");
                dd.selectedIndex = [...dd.options].findIndex (option => option.text === defaultBusiness);
                enableAndDisableCards();
            }
        }

        function hideModal() {
            $("#defaultBusinessModal").removeClass("in");
            $(".modal-backdrop").remove();
            $("#defaultBusinessModal").hide();
        }

        function setDefaultBusiness() {
            let defaultBusiness = $('#defaultLineOfBusiness option:selected').text();
            $.ajax({
                type: "GET",
                contentType: "application/json",
                url: "updateDefaultBusiness?defaultBusiness=" + encodeURIComponent(defaultBusiness),
                success: function (res) {
                    hideModal();
                    location.reload();
                },
                error: function (xhr) {
                    hideModal();
                    console.log(xhr);
                    alert("Error while updating default Business");
                }
            });
        }
    </script>


