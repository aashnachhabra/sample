<%@ page import="com.optum.ideate.mongodb.domain.BenefitCategory" %> <%@ page import="java.util.List" %> <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> <%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> <%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%> <!doctype html> <html> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <link rel="stylesheet" href="css/UHCcustom.css"> <link rel="stylesheet" href="css/bootstrap.css"> <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.21/datatables.min.css"/> <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script> <link rel="stylesheet" href="css/loader.css"> <link rel="stylesheet" href="css/all.css"> <script src="js/jquery-3.3.1.min.js"></script> <script src="js/popper-2.10.2.min.js" ></script> <script src="js/UHCcustom.js"></script> <script src="js/bootstrap.min.js"></script> <script src="js/bootstrap-popup.min.js"></script> <script src="js/loader.js"></script> <script src="js/app/product-management.js"></script> <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script> <title>Plan Library</title> <link rel="icon" href="assets/PlanBuilderFavIcon.png"> <style> .fixed-th { border-collapse: collapse; } .fixed-th tbody { display: block; width: 100%; overflow-y: auto; height: 800px; } .form-check-input:disabled{ pointer-events: none; filter: none; opacity: 1 !important; } table { text-align: left; position: relative; } tr th { background-color: grey !important; position: sticky; top: 0; color: white !important; border-bottom: 1px solid; } </style> <script> $(function () { $('[data-toggle="tooltip"]').tooltip() }) function showOnload() { var status = '${Status}'; console.log(status); if(status != null && status != "" ) { var message = status.split('-'); if(status.includes("Success")) { document.getElementById("successMessage").innerHTML = message[1]; $("#success").toast("show"); }else if(status.includes("Info")) { document.getElementById("InfoMesssage").innerHTML = message[1]; $("#InfoModal").modal("toggle"); }else if(status.includes("Failure")) { document.getElementById("ErrorMesssage").innerHTML = message[1]; $("#ErrorModal").modal("toggle"); } } restrictBrowserClose(); // Hide the loader document.getElementById("loader").style.display = "none"; } </script> <link href="https://unpkg.com/frappe-datatable@0.0.5/dist/frappe-datatable.min.css" rel="stylesheet"> </head> <body onload="showOnload();"> <div id="main"> <%@include file="loader.jsp"%> <%@include file="header.jsp"%> <div class="text-primary" style="margin: 2em;"> <h1>${benefitCategorySearchRequest.coc != null ? benefitCategorySearchRequest.coc : ''} ${benefitCategorySearchRequest.organization != null ? benefitCategorySearchRequest.organization : ''} ${benefitCategorySearchRequest.stateName != null ? benefitCategorySearchRequest.stateName : ''} ${benefitCategorySearchRequest.product != null ? benefitCategorySearchRequest.product : ''} ${benefitCategorySearchRequest.standard != null ? benefitCategorySearchRequest.standard : ''}</h1> </div> <div class="shadow-lg p-3 mb-5 bg-white rounded" style="margin:2em"> <form action="./benefitcategorysearch" id="bcfilters" method="post" onsubmit=" return validateSearch(false);" autocomplete="off"> <input type="hidden" name="planLibraryDDMaps" id="planlibraryddId" value="${planLibraryDD}"> <input type="hidden" id="cocSeries" name= "coc" value="${benefitCategorySearchRequest.coc}" /> <input type="hidden" id="organization" name= "organization" value="${benefitCategoryData.organization}" /> <input type="hidden" id="stateName" name= "stateName" value="${benefitCategoryData.state}" /> <input type="hidden" id="product" name= "product" value="${benefitCategoryData.product}" /> <input type="hidden" id="standard" name= "standard" value="${benefitCategoryData.standard}" /> <div class="row" style="margin-top: 1em;"> <div class="col-8"></div> <div class="col-2"> <div class="d-grid gap-2"> <button type="button" class="btn btn-outline-primary" ${pageContext.session.getAttribute('roleId') != 7 && pageContext.session.getAttribute('ifpRoleId') != 10 && benefitCategorySearchResponse.size() > 0 ?"":"disabled"} data-bs-toggle="modal" data-bs-target="#newBenefitModal"> New Benefit Category</button> </div> </div> <div class="col-2"> <div class="d-grid gap-2"> <button type="button" class="btn btn-outline-success" ${pageContext.session.getAttribute('ifpRoleId')==10 ? "disabled" : (pageContext.session.getAttribute('roleId') != 7 && pageContext.session.getAttribute('ifpRoleId') != 10 && benefitCategorySearchResponse.size() > 0 ?"":"disabled")} onclick="validateCoc('productSave');"> Save</button> </div> </div> </div> </form> <div class="fixed-th"> <c:if test="${ not empty benefitCategorySearchResponse && benefitCategorySearchResponse.size() > 0}"> <script type="text/javascript"> $('#clearBenefitCategory').prop('disabled', false);</script> <table class="table table-hover table-striped" style="margin-top: 1%;" id ="benfitcat"> <tr> <th scope="col" style="width: 30%">Benefit Category</th> <th scope="col" style="width: 10%"> <input class="form-check-input" type="checkbox" name="includeSelDeselectAll" id="includeSelDeselectAll" onclick="includeselDeselectAll()"${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> Include</th> <th scope="col" style="width: 10%"> <input class="form-check-input" type="checkbox" name="ehbSelDeselectAll" id="ehbSelDeselectAll" onclick="ehbSelDeselectAll()"${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> EHB</th> <th scope="col" style="width: 10%"> <input class="form-check-input" type="checkbox" name="defaultCoinsSelDeselectAll" id="defaultCoinsSelDeselectAll" onclick="defaultCoinsSelDeselectAll()"${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> Assign Default Coinsurance</th> <th scope="col" style="width: 20%">EHB Variance Reason</th> <th scope="col" style="width: 10%">Levels</th> <th scope="col" style="width: 20%;">Parent</th> </tr> <% int i=1; %> <c:forEach var="benefitCategoryData" items="${benefitCategorySearchResponse}"> <c:forEach var="benefitCategories" items="${benefitCategoryData.benefitCategories}" varStatus="loop"> <tr> <td>${benefitCategories.benefitCategoryName} <input type="hidden" name="benefitCategoryName" id="benefitCategoryName_<%=i%>" value="${benefitCategories.benefitCategoryName}"> <input type="hidden" name="row_<%=i%>" id="row_<%=i%>" value="0"> <input type="hidden" name="benCatId" id="benCatId_<%=i%>" value="${benefitCategoryData.benCatID}"> <input type="hidden" name="resorganization" id="resorganization_<%=i%>" value="${benefitCategoryData.organization}"> <input type="hidden" name="rescoc" id="rescoc_<%=i%>" value="${benefitCategoryData.cocSeries}"> <input type="hidden" name="ressegment" id="ressegment_<%=i%>" value="${benefitCategoryData.segment}"> <input type="hidden" name="resproduct" id="resproduct_<%=i%>" value="${benefitCategoryData.product}"> <input type="hidden" name="resstateName" id="resstateName_<%=i%>" value="${benefitCategoryData.state}"> <input type="hidden" name="resstandard" id="resstandard_<%=i%>" value="${benefitCategoryData.standard}"> </td> <td> <input class="form-check-input" type="checkbox" ${benefitCategories.include == true ?"checked":""} value="" id="include_<%=i%>" name="include" onchange="onChangeRowValue(<%=i%>);"${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> <input type="hidden" name="includeOrg_<%=i%>" id="includeOrg_<%=i%>" value = ${benefitCategories.include} ${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> </td> <td> <input class="form-check-input" type="checkbox" ${benefitCategories.ehb == true ?"checked":""} value="" id="ehb_<%=i%>" name="ehb" ${benefitCategories.include == true ?"":"disabled"} onchange="onChangeRowValue(<%=i%>);"${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> <input type="hidden" name="ehbOrg_<%=i%>" id="ehbOrg_<%=i%>" value = "${benefitCategories.ehb}"${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> </td> <td> <input class="form-check-input" type="checkbox" ${benefitCategories.defaultCoins == true ?"checked":""} value="" id="defaultCoins_<%=i%>" name="defaultCoins" ${benefitCategories.include == true ?"":"disabled"} onchange="onChangeRowValue(<%=i%>);"${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> <input type="hidden" name="defaultCoinsOrg_<%=i%>" id="defaultCoinsOrg_<%=i%>" value = "${benefitCategories.defaultCoins}"${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> </td> <td> <div> <input type="hidden" name="ehbVarianceReasonOrg_<%=i%>" id="ehbVarianceReasonOrg_<%=i%>" value = "${fn:escapeXml(benefitCategories.ehbVarianceReason != null ? benefitCategories.ehbVarianceReason : "")}"${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> <input type="text" class="form-control" list="ehbVarianceReasons" name="ehbVarianceReason" onpaste="return false" onCopy="return false" onCut="return false" onkeypress="return enterKeyPressed(event)" value="${fn:escapeXml(benefitCategories.ehbVarianceReason != null ? benefitCategories.ehbVarianceReason : "")}" placeholder="Select Reason" ${benefitCategories.include == true ?"":"disabled"} onchange="onChangeRowValue(<%=i%>);" id="ehbVarianceReason_<%=i%>"${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> <datalist id="ehbVarianceReasons"> <c:forEach var="par" items="${ehbVarianceReasonList}"> <option id="${par.name}" name="${par.name}">${par.name}</option> </c:forEach> </datalist> </div> </td> <td> <input class="form-control" type="number" min="0" oninput="this.value = Math.abs(this.value)" value="${benefitCategories.levels}" id="levels_<%=i%>" name="levels" ${benefitCategories.include == true ?"":"disabled"} onchange="onChangeRowValue(<%=i%>);" min="1" max="10" onkeyup="checkLevelValue(<%=i%>);"${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> <input type="hidden" name="levelsOrg_<%=i%>" id="levelsOrg_<%=i%>" value = "${benefitCategories.levels}"${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> </td> <td> <div> <c:choose> <c:when test="${pageContext.session.getAttribute('ifpRoleId') == 10}"> <input type="hidden" name="par_<%=i%>" id="parentOrg_<%=i%>" value = "${fn:escapeXml(benefitCategories.parent != null ? benefitCategories.parent : "")}" ${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> <input type="text" class="form-control" list="parentcats" name="parentcat" value="${fn:escapeXml(benefitCategories.parent != null ? benefitCategories.parent : "")}" placeholder="Select a Parent" ${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""} <input type="hidden" name="parentId" id="parentId"> <datalist id="parentcats"> <c:forEach var="par" items="${masterBenefitCategoryCollections}"> <option id="${par.benefitCategoryID}" name="${par.benefitCategoryValue}">${par.benefitCategoryValue}</option> </c:forEach> </datalist> </c:when> <c:otherwise> <input type="hidden" name="par_<%=i%>" id="parentOrg_<%=i%>" value = "${fn:escapeXml(benefitCategories.parent != null ? benefitCategories.parent : "")}" ${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> <input type="text" class="form-control" list="parentcats" name="parentcat" value="${fn:escapeXml(benefitCategories.parent != null ? benefitCategories.parent : "")}" placeholder="Select a Parent" ${benefitCategories.include == true ?"":"disabled"} onchange="onChangeRowValue(<%=i%>); validateParentBC(<%=i%>);" id="parent_<%=i++%>" ${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> <input type="hidden" name="parentId" id="parentId" ${pageContext.session.getAttribute('ifpRoleId') == 10 ? "disabled" : ""}> <datalist id="parentcats"> <c:forEach var="par" items="${masterBenefitCategoryCollections}"> <option id="${par.benefitCategoryID}" name="${par.benefitCategoryValue}">${par.benefitCategoryValue}</option> </c:forEach> </datalist> </c:otherwise> </c:choose> </div> </td> </tr> </c:forEach> </c:forEach> </table> </c:if> <c:if test="${ empty benefitCategorySearchResponse && benefitCategorySearchResponse.size() == 0}"> <script type="text/javascript"> $('#clearBenefitCategory').prop('disabled', false);</script> <div><p>No results returned. Please update your search criteria and try again.</p></div> </c:if> </div> </div> <%@include file="footer.html"%> <!-- Designed by Connor Ripley for United HealthCare Services, Inc. All Rights Reserved. Copyright 2018. --> <!-- New BenCat Modal --> <div class="modal fade" id="newBenefitModal" tabindex="-1" aria-labelledby="newBenefitModalLabel" aria-hidden="true"> <form action="./addmasterbenefitcategory" method="post" autocomplete="off"> <div class="modal-dialog modal-dialog-centered"> <div class="modal-content"> <div class="modal-header"> <h5 class="modal-title" id="newBenefitModalLabel">Add a New Benefit Category</h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> </div> <div class="modal-body"> <div class="mb-3"> <label for="newBenefitCategoryName" class="form-label">Benefit Category Name</label> <input type="text" class="form-control" id="newBenefitCategoryName" name="newBenefitCategoryName" onkeyup="enableNewBenefit();"> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-warning" data-bs-dismiss="modal" onclick="clearBenefitCategory();">Cancel</button> <button type="submit" class="btn btn-success" disabled="" ${pageContext.session.getAttribute('ifpRoleId')==10 ? "disabled" : ""} id="newBenefitSave">Save</button> </div> </div> </div> </form> </div> <div style="position: fixed; top: 1%; right: 40%; z-index: 1;" class="toast" data-autohide="false" id="success"> <div class="toast-header"> <strong class="mr-auto text-primary"> <i class="fas fa-square" style="color: #00a550"></i> Success </strong> <button type="button" style="margin-left: 15rem;" class="btn-close" data-bs-dismiss="toast"></button> </div> <div class="toast-body" style="background-color: #E8E8E8" id="successMessage"></div> </div> <div class="modal fade" id="ErrorModal" tabindex="-1" aria-labelledby="ErrorModalLabel" aria-hidden="true"> <div class="modal-dialog modal-dialog-centered"> <div class="modal-content"> <div class="modal-header"> <h5> <span id="Close" class="modal-title text-danger">Error</span> </h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> </div> <div class="modal-body" style="overflow: auto; overflow-wrap: break-word; width: 30em; max-height: 20em;"> <p> <span id="ErrorMesssage"></span> </p> </div> <div class="modal-footer"> <input type="submit" name="ErrorClose" value="Cancel" id="ErrorClose" class="btn btn-outline-danger" data-bs-dismiss="modal" autocomplete="off"> </div> </div> </div> </div> <div class="modal fade" id="InfoModal" tabindex="-1" aria-labelledby="InfoModalLabel" aria-hidden="true"> <div class="modal-dialog modal-dialog-centered"> <div class="modal-content"> <div class="modal-header"> <h5> <span id="InfoClose" class="modal-title text-info">Information</span> </h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> </div> <div class="modal-body" style="overflow: auto; overflow-wrap: break-word; width: 30em; max-height: 20em;"> <p> <span id="InfoMesssage"></span> </p> </div> <div class="modal-footer"> <input type="submit" name="InformationClose" value="OK" id="InformationClose" class="btn btn-outline-info" data-bs-dismiss="modal" autocomplete="off"> </div> </div> </div> </div> </div> </body> </html>

this is my jsp page like how multi select button is there i want it for every row entry on left side of benefit category and when a select of a row is checked i wanna delete that pr those entry using an api call in my js file.
 i also want a delete button on top next to new benefit category button in the same style just with red outline which should enable and disable based on if any entry is selected to be deleted or not
when delete is hit i want to also open a warning sort of modal saying do u want to delete this or these entries and has buttons like close and confirm and when i hit confirm i want to call this api for delete /deleteBenefitCategory
