
import allure

from tests.vikings.fw.common.CommonUtils import CommonUtils
from tests.vikings.fw.common.Status import Status


class Results:

    @staticmethod
    def log_event(description, overview):
        allure.attach(
            description,
            name=overview,
            attachment_type=allure.attachment_type.TEXT
        )

    @staticmethod
    def __report_event_basic(description, overview):
        allure.attach(
            overview,
            name=description,
            attachment_type=allure.attachment_type.TEXT
        )

    @staticmethod
    def report_timestamp(description="Captured Timestamp"):
        allure.attach(
            "Current timestamp is: "+CommonUtils.getTimeStamp(),
            name=description,
            attachment_type=allure.attachment_type.TEXT
        )

    @staticmethod
    def report_event(description,status=Status.INFO,overview=""):
        case_status = ""
        if status == Status.PASS:
            case_status = "PASS            "
        elif status == Status.FAIL:
            case_status = "FAIL            "
        elif status == Status.INFO:
            case_status = "INFO            "
        else:
            case_status = ""
        message = case_status + description

        Results.__report_event_basic(message, overview)

        if CommonUtils.is_local_run():
            print(message)

    @staticmethod
    def report_event_assert(field_name, expected, actual, message=None):
        assert expected == actual, f"{field_name} value didn't match"
        if message:
            Results.report_event(f"{message} and {field_name} value is : {expected}",Status.PASS,"", )
        else:
            Results.report_event(f"{field_name} is populated as expected with value: {expected}",Status.PASS,"", )

    def report_event_assert_bool(evaluated_result, message=None):
        if message:
            assert evaluated_result, message
            Results.report_event(message, Status.PASS)
        else:
            assert evaluated_result, "Test failure"
            Results.report_event("Test validation", Status.PASS)

